<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex" />
    <title>Content Manager</title>
    <style>
      .logo {
        display: block;
        margin-left: auto;
        margin-right: auto;
        max-width: 400px;
      }

      @media (max-width: 768px) {
        .logo {
          max-width: 50%;
        }
      }
    </style>

    <script>
      window.CMS_MANUAL_INIT = true;

      function fixInviteToken() {
        const hash = window.location.hash;

        // Case 1: URL starts with `#/invite_token=...`
        if (hash.startsWith("#/invite_token=")) {
          const corrected = "#" + hash.slice(2);
          if (corrected !== hash) {
            history.replaceState(null, null, corrected);
          }
        }

        // Case 2: URL has `invite_token` as a query param but no hash
        const url = new URL(window.location.href);
        if (!hash && url.searchParams.has("invite_token")) {
          const token = url.searchParams.get("invite_token");
          history.replaceState(null, null, "#invite_token=" + token);
        }
      }

      fixInviteToken();
      window.addEventListener("hashchange", fixInviteToken);
    </script>
  </head>
  <body>
    <!-- Optional Logo -->
    <img
      src="/prosper-website-logo.png"
      alt="Prosper XO"
      class="logo"
    />

    <!-- âœ… Load Decap CMS -->
    <script src="https://unpkg.com/decap-cms@3.1.2/dist/decap-cms.js"></script>

    <script>
      function waitForCMS() {
        if (typeof CMS !== "undefined") {
          CMS.init();
        } else {
          setTimeout(waitForCMS, 50);
        }
      }

      document.addEventListener("DOMContentLoaded", waitForCMS);
    </script>
  </body>
</html>


