<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex" />
    <title>Content Manager</title>
    <style>
      .logo {
        display: block;
        margin-left: auto;
        margin-right: auto;
        max-width: 400px;
      }

      @media (max-width: 768px) {
        .logo {
          max-width: 50%;
        }
      }
    </style>

    <!-- ðŸ‘‡ This flag delays automatic CMS init so we can control it -->
    <script>
      window.CMS_MANUAL_INIT = true;
    </script>
  </head>
  <body>
    <!-- Optional Logo -->
    <img
      src="/prosper-website-logo.png"
      alt="Prosper XO"
      class="logo"
    />

    <!-- Decap CMS Script -->
    <script src="https://unpkg.com/decap-cms@3.1.2/dist/decap-cms.js"></script>

    <script>
      function normalizeInviteToken() {
        const hash = window.location.hash;

        // Fix cases like "#/invite_token=abc123" â†’ "#invite_token=abc123"
        if (hash.startsWith("#/invite_token=")) {
          const fixedHash = "#" + hash.slice(2);
          history.replaceState(null, null, fixedHash);
        }
      }

      function waitForCMS() {
        if (typeof CMS !== "undefined") {
          normalizeInviteToken();
          CMS.init();
        } else {
          setTimeout(waitForCMS, 50);
        }
      }

      document.addEventListener("DOMContentLoaded", waitForCMS);
    </script>

  </body>
</html>
